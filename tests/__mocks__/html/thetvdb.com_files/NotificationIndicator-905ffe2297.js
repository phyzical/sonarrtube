var LaravelElixirBundle=function(t){"use strict";function e(t){this.message=t}function n(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(a(t).replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(e)}catch(t){return a(e)}}function r(t){this.message=t}function o(t,e){if("string"!=typeof t)throw new r("Invalid token specified");var o=!0===(e=e||{}).header?0:1;try{return JSON.parse(n(t.split(".")[o]))}catch(t){throw new r("Invalid token specified: "+t.message)}}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,a=0,i=0,c="";o=n.charAt(i++);~o&&(r=a%4?64*r+o:o,a++%4)?c+=String.fromCharCode(255&r>>(-2*a&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return c};r.prototype=new Error,r.prototype.name="InvalidTokenError";var i=React.createElement,c=function(t){function e(e,n){t.call(this,e,n),this.state={user:null,messages:null},this.clicked=this.clicked.bind(this),this.update=this.update.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clicked=function(){window.location.href="/dashboard/notifications"},e.prototype.update=function(){var t=this;fetch("https://api4.thetvdb.com/v4/notifications/unread",{headers:new Headers({Authorization:"Bearer "+localStorage.getItem("v4_jwt")})}).then(function(t){return t.json()}).then(function(e){t.setState({messages:e.data})})},e.prototype.componentDidMount=function(){var t=this;fetch("/token/get").then(function(t){return t.json()}).then(function(e){var n=o(e.jwt);localStorage.setItem("v4_jwt",e.jwt),localStorage.setItem("v4_user",n.id),t.update(),t.interval=setInterval(function(){return t.update()},2e4)})},e.prototype.componentWillUnmount=function(){clearInterval(this.interval)},e.prototype.render=function(){return React.createElement("span",{className:0==this.state.messages?"badge":"badge active",onClick:this.clicked},this.state.messages)},e}(React.Component),s=document.querySelector("#notification-indicator");return null!=s&&ReactDOM.render(i(c),s),t}({});