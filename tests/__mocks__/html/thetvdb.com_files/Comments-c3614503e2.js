var LaravelElixirBundle=function(e){"use strict";function t(e){this.message=e}function n(e){this.message=e}function a(e,t){return t={exports:{}},e(t,t.exports),t.exports}t.prototype=new Error,t.prototype.name="InvalidCharacterError";"undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,o,r=0,i=0,s="";o=n.charAt(i++);~o&&(a=r%4?64*a+o:o,r++%4)?s+=String.fromCharCode(255&a>>(-2*r&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s};n.prototype=new Error,n.prototype.name="InvalidTokenError";var o=function(e){this.codes=[],this.setCodes(e)};o.prototype.parse=function(e){return this.codes.reduce(function(e,t){return e.replace(t.regexp,t.replacement)},e)},o.prototype.add=function(e,t){return this.codes.push({regexp:new RegExp(e,"igms"),replacement:t}),this},o.prototype.setCodes=function(e){return this.codes=Object.keys(e).map(function(t){var n=e[t];return{regexp:new RegExp(t,"igms"),replacement:n}},this),this};var r=new o({"\\[br\\]":"<br>","\\[b\\](.+?)\\[/b\\]":"<strong>$1</strong>","\\[i\\](.+?)\\[/i\\]":"<em>$1</em>","\\[u\\](.+?)\\[/u\\]":"<u>$1</u>","\\[h1\\](.+?)\\[/h1\\]":"<h1>$1</h1>","\\[h2\\](.+?)\\[/h2\\]":"<h2>$1</h2>","\\[h3\\](.+?)\\[/h3\\]":"<h3>$1</h3>","\\[h4\\](.+?)\\[/h4\\]":"<h4>$1</h4>","\\[h5\\](.+?)\\[/h5\\]":"<h5>$1</h5>","\\[h6\\](.+?)\\[/h6\\]":"<h6>$1</h6>","\\[p\\](.+?)\\[/p\\]":"<p>$1</p>","\\[color=(.+?)\\](.+?)\\[/color\\]":'<span style="color:$1">$2</span>',"\\[size=([0-9]+)\\](.+?)\\[/size\\]":'<span style="font-size:$1px">$2</span>',"\\[img\\](.+?)\\[/img\\]":'<img src="$1">',"\\[img=(.+?)\\]":'<img src="$1">',"\\[email\\](.+?)\\[/email\\]":'<a href="mailto:$1">$1</a>',"\\[email=(.+?)\\](.+?)\\[/email\\]":'<a href="mailto:$1">$2</a>',"\\[url\\](.+?)\\[/url\\]":'<a href="$1">$1</a>',"\\[url=(.+?)\\|onclick\\](.+?)\\[/url\\]":'<a onclick="$1">$2</a>',"\\[url=(.+?)\\starget=(.+?)\\](.+?)\\[/url\\]":'<a href="$1" target="$2">$3</a>',"\\[url=(.+?)\\](.+?)\\[/url\\]":'<a href="$1">$2</a>',"\\[a=(.+?)\\](.+?)\\[/a\\]":'<a href="$1" name="$1">$2</a>',"\\[list\\](.+?)\\[/list\\]":"<ul>$1</ul>","\\[\\*\\](.+?)\\[/\\*\\]":"<li>$1</li>"}),i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=a(function(e,t){!function(n,a){"object"==typeof t&&"undefined"!=typeof e?e.exports=a():"function"==typeof define&&define.amd?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self,n.DOMPurify=a())}(i,function(){function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function n(e,a,o){return n=t()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var o=Function.bind.apply(e,a),r=new o;return r},n.apply(null,arguments)}function a(e){return o(e)||r(e)||i(e)||c()}function o(e){if(Array.isArray(e))return s(e)}function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return function(t){for(var n=arguments,a=arguments.length,o=new Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=n[r];return T(e,t,o)}}function p(e){return function(){for(var t=arguments,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=t[o];return S(e,a)}}function m(e,t,n){n=n?n:x,g&&g(e,null);for(var a=t.length;a--;){var o=t[a];if("string"==typeof o){var r=n(o);r!==o&&(y(t)||(t[a]=r),o=r)}e[o]=!0}return e}function u(e){var t,n=N(null);for(t in e)T(f,e,[t])===!0&&(n[t]=e[t]);return n}function d(e,t){function n(e){return console.warn("fallback value for",e),null}for(;null!==e;){var a=b(e,t);if(a){if(a.get)return l(a.get);if("function"==typeof a.value)return l(a.value)}e=v(e)}return n}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae(),n=function(e){return h(e)};if(n.version="2.4.5",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var o=t.document,r=t.document,i=t.DocumentFragment,s=t.HTMLTemplateElement,c=t.Node,l=t.Element,p=t.NodeFilter,f=t.NamedNodeMap,g=void 0===f?t.NamedNodeMap||t.MozNamedAttrMap:f,y=t.HTMLFormElement,v=t.DOMParser,b=t.trustedTypes,R=l.prototype,N=d(R,"cloneNode"),C=d(R,"nextSibling"),T=d(R,"childNodes"),S=d(R,"parentNode");if("function"==typeof s){var re=r.createElement("template");re.content&&re.content.ownerDocument&&(r=re.content.ownerDocument)}var ie=oe(b,o),se=ie?ie.createHTML(""):"",ce=r,le=ce.implementation,pe=ce.createNodeIterator,me=ce.createDocumentFragment,ue=ce.getElementsByTagName,de=o.importNode,he={};try{he=u(r).documentMode?r.documentMode:{}}catch(fe){}var ge={};n.isSupported="function"==typeof S&&le&&"undefined"!=typeof le.createHTMLDocument&&9!==he;var ye,ve,be=q,Ee=Y,Re=Z,Ne=K,Ce=X,Te=ee,Se=te,_e=Q,ke=null,we=m({},[].concat(a(F),a(j),a(H),a(B),a(z))),xe=null,Ae=m({},[].concat(a(G),a(W),a(J),a(V))),De=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Le=null,Oe=null,Me=!0,Ie=!0,Pe=!1,Fe=!0,je=!1,He=!1,Ue=!1,Be=!1,$e=!1,ze=!1,Ge=!1,We=!0,Je=!1,Ve="user-content-",qe=!0,Ye=!1,Ze={},Ke=null,Xe=m({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Qe=null,et=m({},["audio","video","img","source","image","track"]),tt=null,nt=m({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),at="http://www.w3.org/1998/Math/MathML",ot="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml",it=rt,st=!1,ct=null,lt=m({},[at,ot,rt],A),pt=["application/xhtml+xml","text/html"],mt="text/html",ut=null,dt=r.createElement("form"),ht=function(e){return e instanceof RegExp||e instanceof Function},ft=function(t){ut&&ut===t||(t&&"object"===e(t)||(t={}),t=u(t),ye=ye=pt.indexOf(t.PARSER_MEDIA_TYPE)===-1?mt:t.PARSER_MEDIA_TYPE,ve="application/xhtml+xml"===ye?A:x,ke="ALLOWED_TAGS"in t?m({},t.ALLOWED_TAGS,ve):we,xe="ALLOWED_ATTR"in t?m({},t.ALLOWED_ATTR,ve):Ae,ct="ALLOWED_NAMESPACES"in t?m({},t.ALLOWED_NAMESPACES,A):lt,tt="ADD_URI_SAFE_ATTR"in t?m(u(nt),t.ADD_URI_SAFE_ATTR,ve):nt,Qe="ADD_DATA_URI_TAGS"in t?m(u(et),t.ADD_DATA_URI_TAGS,ve):et,Ke="FORBID_CONTENTS"in t?m({},t.FORBID_CONTENTS,ve):Xe,Le="FORBID_TAGS"in t?m({},t.FORBID_TAGS,ve):{},Oe="FORBID_ATTR"in t?m({},t.FORBID_ATTR,ve):{},Ze="USE_PROFILES"in t&&t.USE_PROFILES,Me=t.ALLOW_ARIA_ATTR!==!1,Ie=t.ALLOW_DATA_ATTR!==!1,Pe=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Fe=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,je=t.SAFE_FOR_TEMPLATES||!1,He=t.WHOLE_DOCUMENT||!1,$e=t.RETURN_DOM||!1,ze=t.RETURN_DOM_FRAGMENT||!1,Ge=t.RETURN_TRUSTED_TYPE||!1,Be=t.FORCE_BODY||!1,We=t.SANITIZE_DOM!==!1,Je=t.SANITIZE_NAMED_PROPS||!1,qe=t.KEEP_CONTENT!==!1,Ye=t.IN_PLACE||!1,_e=t.ALLOWED_URI_REGEXP||_e,it=t.NAMESPACE||rt,De=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ht(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(De.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ht(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(De.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(De.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),je&&(Ie=!1),ze&&($e=!0),Ze&&(ke=m({},a(z)),xe=[],Ze.html===!0&&(m(ke,F),m(xe,G)),Ze.svg===!0&&(m(ke,j),m(xe,W),m(xe,V)),Ze.svgFilters===!0&&(m(ke,H),m(xe,W),m(xe,V)),Ze.mathMl===!0&&(m(ke,B),m(xe,J),m(xe,V))),t.ADD_TAGS&&(ke===we&&(ke=u(ke)),m(ke,t.ADD_TAGS,ve)),t.ADD_ATTR&&(xe===Ae&&(xe=u(xe)),m(xe,t.ADD_ATTR,ve)),t.ADD_URI_SAFE_ATTR&&m(tt,t.ADD_URI_SAFE_ATTR,ve),t.FORBID_CONTENTS&&(Ke===Xe&&(Ke=u(Ke)),m(Ke,t.FORBID_CONTENTS,ve)),qe&&(ke["#text"]=!0),He&&m(ke,["html","head","body"]),ke.table&&(m(ke,["tbody"]),delete Le.tbody),E&&E(t),ut=t)},gt=m({},["mi","mo","mn","ms","mtext"]),yt=m({},["foreignobject","desc","title","annotation-xml"]),vt=m({},["title","style","font","a","script"]),bt=m({},j);m(bt,H),m(bt,U);var Et=m({},B);m(Et,$);var Rt=function(e){var t=S(e);t&&t.tagName||(t={namespaceURI:it,tagName:"template"});var n=x(e.tagName),a=x(t.tagName);return!!ct[e.namespaceURI]&&(e.namespaceURI===ot?t.namespaceURI===rt?"svg"===n:t.namespaceURI===at?"svg"===n&&("annotation-xml"===a||gt[a]):Boolean(bt[n]):e.namespaceURI===at?t.namespaceURI===rt?"math"===n:t.namespaceURI===ot?"math"===n&&yt[a]:Boolean(Et[n]):e.namespaceURI===rt?!(t.namespaceURI===ot&&!yt[a])&&(!(t.namespaceURI===at&&!gt[a])&&(!Et[n]&&(vt[n]||!bt[n]))):!("application/xhtml+xml"!==ye||!ct[e.namespaceURI]))},Nt=function(e){w(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=se}catch(t){e.remove()}}},Ct=function(e,t){try{w(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(a){w(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!xe[e])if($e||ze)try{Nt(t)}catch(a){}else try{t.setAttribute(e,"")}catch(a){}},Tt=function(e){var t,n;if(Be)e="<remove></remove>"+e;else{var a=D(e,/^[\r\n\t ]+/);n=a&&a[0]}"application/xhtml+xml"===ye&&it===rt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=ie?ie.createHTML(e):e;if(it===rt)try{t=(new v).parseFromString(o,ye)}catch(i){}if(!t||!t.documentElement){t=le.createDocument(it,"template",null);try{t.documentElement.innerHTML=st?se:o}catch(i){}}var s=t.body||t.documentElement;return e&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),it===rt?ue.call(t,He?"html":"body")[0]:He?t.documentElement:s},St=function(e){return pe.call(e.ownerDocument||e,e,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT,null,!1)},_t=function(e){return e instanceof y&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof g)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},kt=function(t){return"object"===e(c)?t instanceof c:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},wt=function(e,t,a){ge[e]&&_(ge[e],function(e){e.call(n,t,a,ut)})},xt=function(e){var t;if(wt("beforeSanitizeElements",e,null),_t(e))return Nt(e),!0;if(I(/[\u0080-\uFFFF]/,e.nodeName))return Nt(e),!0;var a=ve(e.nodeName);if(wt("uponSanitizeElement",e,{tagName:a,allowedTags:ke}),e.hasChildNodes()&&!kt(e.firstElementChild)&&(!kt(e.content)||!kt(e.content.firstElementChild))&&I(/<[\/\w]/g,e.innerHTML)&&I(/<[\/\w]/g,e.textContent))return Nt(e),!0;if("select"===a&&I(/<template/i,e.innerHTML))return Nt(e),!0;if(!ke[a]||Le[a]){if(!Le[a]&&Dt(a)){if(De.tagNameCheck instanceof RegExp&&I(De.tagNameCheck,a))return!1;if(De.tagNameCheck instanceof Function&&De.tagNameCheck(a))return!1}if(qe&&!Ke[a]){var o=S(e)||e.parentNode,r=T(e)||e.childNodes;if(r&&o)for(var i=r.length,s=i-1;s>=0;--s)o.insertBefore(N(r[s],!0),C(e))}return Nt(e),!0}return e instanceof l&&!Rt(e)?(Nt(e),!0):"noscript"!==a&&"noembed"!==a||!I(/<\/no(script|embed)/i,e.innerHTML)?(je&&3===e.nodeType&&(t=e.textContent,t=L(t,be," "),t=L(t,Ee," "),t=L(t,Re," "),e.textContent!==t&&(w(n.removed,{element:e.cloneNode()}),e.textContent=t)),wt("afterSanitizeElements",e,null),!1):(Nt(e),!0)},At=function(e,t,n){if(We&&("id"===t||"name"===t)&&(n in r||n in dt))return!1;if(Ie&&!Oe[t]&&I(Ne,t));else if(Me&&I(Ce,t));else if(!xe[t]||Oe[t]){if(!(Dt(e)&&(De.tagNameCheck instanceof RegExp&&I(De.tagNameCheck,e)||De.tagNameCheck instanceof Function&&De.tagNameCheck(e))&&(De.attributeNameCheck instanceof RegExp&&I(De.attributeNameCheck,t)||De.attributeNameCheck instanceof Function&&De.attributeNameCheck(t))||"is"===t&&De.allowCustomizedBuiltInElements&&(De.tagNameCheck instanceof RegExp&&I(De.tagNameCheck,n)||De.tagNameCheck instanceof Function&&De.tagNameCheck(n))))return!1}else if(tt[t]);else if(I(_e,L(n,Se,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==O(n,"data:")||!Qe[e]){if(Pe&&!I(Te,L(n,Se,"")));else if(n)return!1}else;return!0},Dt=function(e){return e.indexOf("-")>0},Lt=function(t){var a,o,r,i;wt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe};for(i=s.length;i--;){a=s[i];var l=a,p=l.name,m=l.namespaceURI;if(o="value"===p?a.value:M(a.value),r=ve(p),c.attrName=r,c.attrValue=o,c.keepAttr=!0,c.forceKeepAttr=void 0,wt("uponSanitizeAttribute",t,c),o=c.attrValue,!c.forceKeepAttr&&(Ct(p,t),c.keepAttr))if(Fe||!I(/\/>/i,o)){je&&(o=L(o,be," "),o=L(o,Ee," "),o=L(o,Re," "));var u=ve(t.nodeName);if(At(u,r,o)){if(!Je||"id"!==r&&"name"!==r||(Ct(p,t),o=Ve+o),ie&&"object"===e(b)&&"function"==typeof b.getAttributeType)if(m);else switch(b.getAttributeType(u,r)){case"TrustedHTML":o=ie.createHTML(o);break;case"TrustedScriptURL":o=ie.createScriptURL(o)}try{m?t.setAttributeNS(m,p,o):t.setAttribute(p,o),k(n.removed)}catch(d){}}}else Ct(p,t)}wt("afterSanitizeAttributes",t,null)}},Ot=function Mt(e){var t,n=St(e);for(wt("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)wt("uponSanitizeShadowNode",t,null),xt(t)||(t.content instanceof i&&Mt(t.content),Lt(t));wt("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(a){var r,s,l,p,m,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(st=!a,st&&(a="<!-->"),"string"!=typeof a&&!kt(a)){if("function"!=typeof a.toString)throw P("toString is not a function");if(a=a.toString(),"string"!=typeof a)throw P("dirty is not a string, aborting")}if(!n.isSupported){if("object"===e(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof a)return t.toStaticHTML(a);if(kt(a))return t.toStaticHTML(a.outerHTML)}return a}if(Ue||ft(u),n.removed=[],"string"==typeof a&&(Ye=!1),Ye){if(a.nodeName){var d=ve(a.nodeName);if(!ke[d]||Le[d])throw P("root node is forbidden and cannot be sanitized in-place")}}else if(a instanceof c)r=Tt("<!---->"),s=r.ownerDocument.importNode(a,!0),1===s.nodeType&&"BODY"===s.nodeName?r=s:"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!$e&&!je&&!He&&a.indexOf("<")===-1)return ie&&Ge?ie.createHTML(a):a;if(r=Tt(a),!r)return $e?null:Ge?se:""}r&&Be&&Nt(r.firstChild);for(var h=St(Ye?a:r);l=h.nextNode();)3===l.nodeType&&l===p||xt(l)||(l.content instanceof i&&Ot(l.content),Lt(l),p=l);if(p=null,Ye)return a;if($e){if(ze)for(m=me.call(r.ownerDocument);r.firstChild;)m.appendChild(r.firstChild);else m=r;return(xe.shadowroot||xe.shadowrootmod)&&(m=de.call(o,m,!0)),m}var f=He?r.outerHTML:r.innerHTML;return He&&ke["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&I(ne,r.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+f),je&&(f=L(f,be," "),f=L(f,Ee," "),f=L(f,Re," ")),ie&&Ge?ie.createHTML(f):f},n.setConfig=function(e){ft(e),Ue=!0},n.clearConfig=function(){ut=null,Ue=!1},n.isValidAttribute=function(e,t,n){ut||ft({});var a=ve(e),o=ve(t);return At(a,o,n)},n.addHook=function(e,t){"function"==typeof t&&(ge[e]=ge[e]||[],w(ge[e],t))},n.removeHook=function(e){if(ge[e])return k(ge[e])},n.removeHooks=function(e){ge[e]&&(ge[e]=[])},n.removeAllHooks=function(){ge={}},n}var f=Object.hasOwnProperty,g=Object.setPrototypeOf,y=Object.isFrozen,v=Object.getPrototypeOf,b=Object.getOwnPropertyDescriptor,E=Object.freeze,R=Object.seal,N=Object.create,C="undefined"!=typeof Reflect&&Reflect,T=C.apply,S=C.construct;T||(T=function(e,t,n){return e.apply(t,n)}),E||(E=function(e){return e}),R||(R=function(e){return e}),S||(S=function(e,t){return n(e,a(t))});var _=l(Array.prototype.forEach),k=l(Array.prototype.pop),w=l(Array.prototype.push),x=l(String.prototype.toLowerCase),A=l(String.prototype.toString),D=l(String.prototype.match),L=l(String.prototype.replace),O=l(String.prototype.indexOf),M=l(String.prototype.trim),I=l(RegExp.prototype.test),P=p(TypeError),F=E(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=E(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),H=E(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U=E(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),B=E(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$=E(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z=E(["#text"]),G=E(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),W=E(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),J=E(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V=E(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),q=R(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y=R(/<%[\w\W]*|[\w\W]*%>/gm),Z=R(/\${[\w\W]*}/gm),K=R(/^data-[\-\w.\u00B7-\uFFFF]/),X=R(/^aria-[\-\w]+$/),Q=R(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ee=R(/^(?:\w+script|data):/i),te=R(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ne=R(/^html$/i),ae=function(){return"undefined"==typeof window?null:window},oe=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var a=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(a=n.currentScript.getAttribute(o));var r="dompurify"+(a?"#"+a:"");try{return t.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(i){return console.warn("TrustedTypes policy "+r+" could not be created."),null}},re=h();return re})}),c=2,l=function(e){function t(t){e.call(this,t),this.state={uuid:null,comment:null,userName:null,userLevel:null,userId:0,userType:null,posted:null,pinned:!1,pinnedUUID:null,likes:0,liked:0,deleting:!1,deleted:!1,expanded:!1,editing:!1,editComment:null,reporting:!1,reportReason:"",reportCount:0},this.toggleReporting=this.toggleReporting.bind(this),this.changeReportReason=this.changeReportReason.bind(this),this.toggleDeleting=this.toggleDeleting.bind(this),this.deleteComment=this.deleteComment.bind(this),this.clearReporting=this.clearReporting.bind(this),this.saveReportComment=this.saveReportComment.bind(this),this.toggleExpanded=this.toggleExpanded.bind(this),this.toggleLiked=this.toggleLiked.bind(this),this.togglePinned=this.togglePinned.bind(this),this.toggleEditing=this.toggleEditing.bind(this),this.changeEditComment=this.changeEditComment.bind(this),this.saveEditComment=this.saveEditComment.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentDidMount=function(){var e=this;if(this.props.comment&&void 0!==this.props.comment.user_id){var t=new Date(this.props.comment.created_at),n=JSON.parse(sessionStorage.getItem("usersCache"));Array.isArray(n)||(n=[]);var a=n.filter(function(t){return t.id===e.props.comment.user_id});if(a.length>0)this.setState({userName:a[0].name,userLevel:a[0].level});else{fetch("/tvdbapi/users/"+this.props.comment.user_id,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState({userName:t.name,userLevel:t.level}),n.push(t),sessionStorage.setItem("usersCache",JSON.stringify(n))})}var o=null;void 0!==this.props.comment.flags&&this.props.comment.flags.forEach(function(e){"Pinned"==e.type&&(o=e.uuid)}),this.setState({uuid:this.props.comment.uuid,comment:s.sanitize(this.linkify(r.parse(this.props.comment.text))),userId:this.props.comment.user_id,posted:t.toLocaleTimeString([],{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"}),pinned:null!==o,pinnedUUID:o,likes:this.props.comment.like_count,liked:this.props.comment.is_liked,editComment:this.props.comment.text,reportCount:this.props.comment.report_count})}},t.prototype.toggleReporting=function(e){e.preventDefault(),this.setState({reporting:!this.state.reporting})},t.prototype.changeReportReason=function(e){this.setState({reportReason:e.target.value})},t.prototype.clearReporting=function(e){var t=this;e.preventDefault();fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"delete",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid+"/reports",parameters:{}})}).then(function(e){return e.json()}).then(function(e){t.setState({reportCount:0})})["catch"](function(e){console.error(e)})},t.prototype.saveReportComment=function(e){var t=this;e.preventDefault();fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"post",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid+"/report/"+this.state.reportReason,parameters:{}})}).then(function(e){return e.json()}).then(function(e){t.setState({reportCount:t.state.reportCount+1,reporting:!t.state.reporting})})["catch"](function(e){console.error(e)})},t.prototype.toggleDeleting=function(e){e.preventDefault(),this.setState({deleting:!this.state.deleting})},t.prototype.toggleExpanded=function(e){this.props.toggleExpanded(),this.setState({expanded:!this.state.expanded}),e.preventDefault()},t.prototype.toggleLiked=function(e){if(e.preventDefault(),this.state.liked){this.setState({liked:!1,likes:this.state.likes-1});fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"delete",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid+"/like",parameters:{type:"like"}})})["catch"](function(e){console.error(e)})}else{this.setState({liked:!0,likes:this.state.likes+1});fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"post",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid+"/like",parameters:{type:"like"}})})["catch"](function(e){console.error(e)})}},t.prototype.togglePinned=function(e){var t=this;if(e.preventDefault(),this.state.pinned){fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"delete",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid+"/flag/"+this.state.pinnedUUID,parameters:{}})}).then(function(e){return e.json()}).then(function(e){t.setState({pinned:!1,pinnedUUID:null})})["catch"](function(e){console.error(e)})}else{fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"post",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid+"/flag",parameters:{type:"Pinned",value:"Pinned by "+this.props.authuser.name}})}).then(function(e){return e.json()}).then(function(e){t.setState({pinned:!t.state.pinned,pinnedUUID:e.data.uuid})})["catch"](function(e){console.error(e)})}},t.prototype.toggleEditing=function(e){var t=this;e.preventDefault(),setTimeout(function(){t.setState({editComment:t.state.comment,editing:!t.state.editing})},0)},t.prototype.changeEditComment=function(e){this.setState({editComment:e.target.value})},t.prototype.saveEditComment=function(e){var t=this;e.preventDefault();fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"put",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid,parameters:{type:"comment",text:this.state.editComment}})}).then(function(e){return e.json()}).then(function(e){t.setState({editing:!t.state.editing,comment:t.state.editComment})})["catch"](function(e){console.error(e)})},t.prototype.deleteComment=function(e){var t=this;e.preventDefault();fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"delete",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid,parameters:{}})}).then(function(e){return e.json()}).then(function(e){t.setState({deleted:!0}),t.props.isChild!==!0&&t.props.deleteGroup()})["catch"](function(e){console.error(e)})},t.prototype.linkify=function(e){var t,n,a,o;return n=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,t=e.replace(n,'<a href="$1" target="_blank">$1</a>'),a=/(^|[^\/])(www\.[\S]+(\b|$))/gim,t=t.replace(a,'$1<a href="http://$2" target="_blank">$2</a>'),o=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,t=t.replace(o,'<a href="mailto:$1">$1</a>')},t.prototype.render=function(){return this.state.deleted?React.createElement("div",null):this.state.reportCount>=c&&"user"==this.props.authuser.level?React.createElement("div",{className:"comment"},React.createElement("div",{className:"commentBody commentHidden"},"This comment is hidden pending moderator review.")):React.createElement("div",{className:"comment "+(this.state.reportCount>0&&("administrator"==this.props.authuser.level||"moderator"==this.props.authuser.level)?"escalated ":"")+(this.state.pinned?"pinned ":"")},React.createElement("div",{className:this.state.deleting?"commentOverlay":"hidden"},React.createElement("div",{className:"commentDelete"},"Are you sure you want to delete this comment? ",React.createElement("div",null,React.createElement("button",{className:"btn btn-danger",onClick:this.deleteComment},"Yes"),React.createElement("button",{className:"btn btn-default",onClick:this.toggleDeleting},"No")))),React.createElement("div",{className:this.state.reporting?"commentOverlay":"hidden"},React.createElement("div",{className:"commentDelete"},React.createElement("div",null,React.createElement("div",{classname:"mt-3 mb-3"},React.createElement("select",{className:"form-control",
style:{display:"inline-block",width:"auto"},onChange:this.changeReportReason},React.createElement("option",{value:""}),React.createElement("option",{value:"harassment"},"Harassment"),React.createElement("option",{value:"inappropriate"},"Inappropriate"),React.createElement("option",{value:"spam"},"Spam"),React.createElement("option",{value:"other"},"Other"))),React.createElement("button",{className:"btn btn-danger",onClick:this.saveReportComment,disabled:""==this.state.reportReason},"Report"),React.createElement("button",{className:"btn btn-default",onClick:this.toggleReporting},"Cancel")))),React.createElement("div",{className:"commentHeader"},React.createElement("span",{className:1==this.props.isChild||"administrator"==this.props.authuser.level||"moderator"==this.props.authuser.level?"hidden":"commentHeaderRight"},React.createElement("i",{className:1==this.state.pinned?"fa fa-thumb-tack text-sunglow":"hidden","aria-hidden":"true"})),React.createElement("span",{className:"administrator"==this.props.authuser.level||"moderator"==this.props.authuser.level?"commentHeaderRight":"hidden"},React.createElement("a",{href:"#",onClick:this.togglePinned,className:1==this.props.isChild?"hidden":""},React.createElement("i",{className:this.state.pinned?"fa fa-thumb-tack text-sunglow":"fa fa-thumb-tack text-muted","aria-hidden":"true"})),this.state.posted),React.createElement("h4",null,React.createElement("span",{className:"fa-stack fa-lg avatar"},React.createElement("i",{className:"fa fa-circle fa-stack-2x"}),React.createElement("i",{className:"fa fa-user fa-stack-1x fa-inverse"})),this.state.userName,React.createElement("span",{className:"administrator"==this.state.userLevel?"label label-sunglow":"hidden"},"admin"),React.createElement("span",{className:"moderator"==this.state.userLevel?"label label-columbia":"hidden"},"mod"))),React.createElement("div",{className:"commentBody"},React.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.editing?"":this.state.comment}}),React.createElement("div",{className:this.state.editing?"commentEdit":"hidden"},React.createElement("div",null,React.createElement("textarea",{className:"form-control",rows:"5",name:"reply",placeholder:"Add a reply...",onChange:this.changeEditComment,value:this.state.editComment})),React.createElement("div",{className:"mt-1"},React.createElement("button",{className:"btn btn-success commentReplyButton",onClick:this.saveEditComment},"Save"),React.createElement("button",{className:"btn btn-default",onClick:this.toggleEditing},"Cancel")))),React.createElement("div",{className:"commentFooter"},React.createElement("div",{className:"commentFooterSection"},React.createElement("a",{href:"#",onClick:this.toggleLiked},React.createElement("i",{className:this.state.liked?"fa fa-thumbs-up":"fa fa-thumbs-o-up","aria-hidden":"true"}),this.state.likes)),React.createElement("div",{className:this.props.authuser.id==this.state.userId||"administrator"==this.props.authuser.level||"moderator"==this.props.authuser.level?"commentFooterSection":"hidden"},React.createElement("a",{href:"#",onClick:this.toggleEditing},React.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))),React.createElement("div",{className:this.props.authuser.id==this.props.comment.user_id||"administrator"==this.props.authuser.level||"moderator"==this.props.authuser.level?"commentFooterSection":"hidden"},React.createElement("a",{href:"#",onClick:this.toggleDeleting},React.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))),React.createElement("div",{className:"administrator"==this.props.authuser.level||"moderator"==this.props.authuser.level?"commentFooterSection":"hidden"},React.createElement("a",{href:"#",onClick:this.toggleReporting},"Report")),React.createElement("div",{className:this.state.reportCount>0&&("administrator"==this.props.authuser.level||"moderator"==this.props.authuser.level)?"commentFooterSection":"hidden"},React.createElement("a",{href:"#",onClick:this.clearReporting},"Clear ",this.state.reportCount," Report",1==this.state.reportCount?"":"s")),React.createElement("div",{className:1==this.props.isChild?"hidden":"commentFooterSection"},React.createElement("a",{href:"#",onClick:this.toggleExpanded},React.createElement("i",{className:"fa fa-comment-o","aria-hidden":"true"}),this.props.comment.reply_count,React.createElement("i",{"class":this.state.expanded?"fa fa-chevron-up":"fa fa-chevron-down","aria-hidden":"true"})))))},t}(React.Component),p=function(e){function t(t){e.call(this,t),this.state={focused:!1,comment:{},expanded:!1,addReplyContent:"",replies:[],repliesLoaded:!1,deleted:!1},this._onBlur=this._onBlur.bind(this),this._onFocus=this._onFocus.bind(this),this._onChange=this._onChange.bind(this),this.toggleExpanded=this.toggleExpanded.bind(this),this.addReply=this.addReply.bind(this),this.deleteGroup=this.deleteGroup.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentDidMount=function(){this.props.comment&&this.setState({comment:this.props.comment,replies:this.props.comment.replies})},t.prototype._onBlur=function(){var e=this;setTimeout(function(){e.state.focused&&e.setState({focused:!1})},0)},t.prototype._onFocus=function(){this.state.focused||this.setState({focused:!0})},t.prototype._onChange=function(e){this.setState({addReplyContent:e.target.value})},t.prototype.stripHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText},t.prototype.addReply=function(e){var t=this;e.preventDefault();fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"post",service:"comments",endpoint:"/v1/comments/"+this.props.comment.uuid+"/reply",parameters:{type:"comment",entity_type:this.props.entity_type,entity_uuid:this.props.entity_uuid,text:this.stripHTML(this.state.addReplyContent)}})}).then(function(e){return e.json()}).then(function(e){if("success"==e.status){var n=t.state.replies;n.unshift(e.data);var a=t.state.comment;a.reply_count++,t.setState({replies:n,addReplyContent:"",comment:a})}})["catch"](function(e){console.error(e)})},t.prototype.toggleExpanded=function(){var e=this;if(this.state.expanded)this.setState({expanded:!1});else if(this.setState({expanded:!0}),0==this.state.repliesLoaded){fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"get",service:"comments",endpoint:"/v1/comments/cgw/"+this.props.comment.uuid+"/replies",parameters:[]})}).then(function(e){return e.json()}).then(function(t){"success"==t.status&&e.setState({replies:t.data,repliesLoaded:!0})})["catch"](function(e){console.error(e)})}},t.prototype.deleteGroup=function(){this.setState({deleted:!0})},t.prototype.render=function(){var e=this;return this.state.deleted?React.createElement("div",null):React.createElement("div",{className:"commentGroup"},React.createElement(l,{key:this.state.comment.uuid,entity_uuid:this.props.entity,comment:this.state.comment,toggleExpanded:this.toggleExpanded,authuser:this.props.authuser,deleteGroup:this.deleteGroup}),React.createElement("div",{className:this.state.expanded?"":"hidden"},React.createElement("div",{className:"commentChildren"},React.createElement("div",{className:this.state.repliesLoaded?"hidden":"loading mt-1"},React.createElement("i",{"class":"fa fa-spinner fa-spin fa-fw"})," Loading"),React.createElement("div",{className:this.state.repliesLoaded?"":"hidden"},this.state.replies.sort(function(e,t){return e.created_at>t.created_at?-1:0}).reverse().map(function(t){return React.createElement(l,{key:t.uuid,comment:t,isChild:!0,authuser:e.props.authuser})}))),React.createElement("div",{className:this.state.repliesLoaded?"":"hidden"},React.createElement("div",{className:"commentGroupReply"},React.createElement("div",null,React.createElement("textarea",{className:"form-control",rows:1==this.state.focused?3:1,name:"reply",placeholder:"Add a reply...",onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onChange,value:this.state.addReplyContent}),React.createElement("div",{className:"help-block"},"BBCode allowed, plus links to: TheTVDB, TV Time, IMDB, TMDB, Wikipedia, EIDR, Variety, Hollywood Reporter, Deadline, TVLine, IndieWire.")),React.createElement("div",null,React.createElement("button",{className:"btn btn-success commentReplyButton",onClick:this.addReply},React.createElement("i",{"class":"fa fa-paper-plane","aria-hidden":"true"})))))))},t}(React.Component),m=function(e){function t(t,n){e.call(this,t,n),this.state={page:this.props.page,range:9},this._onClick=this._onClick.bind(this),this.prevPage=this.prevPage.bind(this),this.nextPage=this.nextPage.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._onClick=function(e){var t=this;e.preventDefault(),"..."!==e.target.getAttribute("data-page")&&this.setState({page:parseInt(e.target.getAttribute("data-page"))},function(){t.props.handleChange(t.state.page)})},t.prototype.prevPage=function(e){var t=this;e.preventDefault(),this.state.page>1&&this.setState({page:this.state.page-1},function(){t.props.handleChange(t.state.page)})},t.prototype.nextPage=function(e){var t=this;e.preventDefault(),this.state.page<this.props.maxPages&&this.setState({page:this.state.page+1},function(){t.props.handleChange(t.state.page)})},t.prototype.doNothing=function(e){e.preventDefault()},t.prototype.getPages=function(){var e=this.state.page,t=this.state.range,n=this.props.maxPages,a=1,o=[];a=e<t/2+1?1:e>=n-t/2?Math.floor(n-t+1):e-Math.floor(t/2);for(var r=a;r<=a+t-1;r++)o.push(r.toString());return a>1&&(o[0]="..."),o[o.length-1]<n&&(o[o.length-1]="..."),o},t.prototype.render=function(){var e=this;return React.createElement("nav",{className:this.props.maxPages<2?"hidden":"","aria-label":"Page navigation"},React.createElement("ul",{className:"pagination mt-0"},React.createElement("li",{className:1==this.state.page?"disabled":""},React.createElement("a",{href:"#",onClick:this.prevPage},React.createElement("i",{className:"fa fa-chevron-left","aria-hidden":"true"}))),this.getPages().map(function(t){return React.createElement("li",{className:t==e.state.page?"active":"..."==t?"disabled":""},React.createElement("a",{href:"#",onClick:e._onClick,"data-page":t},t))}),React.createElement("li",{className:this.state.page>=this.props.maxPages?"disabled":""},React.createElement("a",{href:"#",onClick:this.nextPage},React.createElement("i",{className:"fa fa-chevron-right","aria-hidden":"true"})))))},t}(React.Component),u=React.createElement,d=function(e){function t(t,n){e.call(this,t,n),this.state={loading:!0,showPostForm:!1,comments:[],addCommentContent:"",authuser:{id:0,level:"user"},page:1,perPage:5},this._onChange=this._onChange.bind(this),this.addComment=this.addComment.bind(this),this.togglePostForm=this.togglePostForm.bind(this),this.showPage=this.showPage.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.componentDidMount=function(){var e=this;if(null!=this.props.entity&&null!=this.props.entityType){fetch("/tvdbapi/users/authenticated",{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState({authuser:t})}),fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"get",service:"comments",endpoint:"/v1/comments/cgw/entity/"+this.props.entity+"/comments",parameters:[]})}).then(function(e){return e.json()}).then(function(t){"success"==t.status&&e.setState({loading:!1,comments:t.data})})["catch"](function(e){console.error(e)})}},t.prototype._onChange=function(e){this.setState({addCommentContent:e.target.value})},t.prototype.addComment=function(e){var t=this;e.preventDefault();fetch("/tvtapi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"post",service:"comments",endpoint:"/v1/comments/comment",parameters:{type:"comment",entity_type:this.props.entityType,entity_uuid:this.props.entity,text:this.stripHTML(this.state.addCommentContent)}})}).then(function(e){return e.json()}).then(function(e){if("success"==e.status){var n=t.state.comments;e.data.replies=[],n.unshift(e.data),t.setState({comments:n,addCommentContent:""})}})["catch"](function(e){console.error(e)})},t.prototype.togglePostForm=function(){this.setState({showPostForm:!this.state.showPostForm})},t.prototype.showPage=function(e){this.setState({page:e})},t.prototype.stripHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText},t.prototype.render=function(){var e=this;return this.state.loading?React.createElement("div",{className:"loading"},React.createElement("i",{"class":"fa fa-spinner fa-spin fa-fw"})," Loading notes"):React.createElement("div",{className:"comments"},React.createElement("p",{className:"mb-2"},"Notes are intended as a place for site contributors to resolve questions related to the structure of this record.  If you would like to discuss shows and movies with other fans, please use ",React.createElement("a",{href:"https://tvtime.com/",target:"_blank"},"TV Time")," instead."),React.createElement("div",{className:"commentPost"},React.createElement("div",{className:"commentGroupReply mt-1 mb-3"},React.createElement("div",null,React.createElement("textarea",{className:"form-control",rows:"3",name:"reply",placeholder:"Add a comment...",onChange:this._onChange,value:this.state.addCommentContent}),React.createElement("div",{className:"help-block"},"BBCode allowed, plus links to: TheTVDB, TV Time, IMDB, TMDB, Wikipedia, EIDR.")),React.createElement("div",null,React.createElement("button",{className:"btn btn-success commentReplyButton",onClick:this.addComment},React.createElement("i",{"class":"fa fa-paper-plane","aria-hidden":"true"}))))),this.state.comments.sort(function(e,t){var n=void 0===e.flags?[]:e.flags.filter(function(e){return"Pinned"==e.type}),a=void 0===t.flags?[]:t.flags.filter(function(e){return"Pinned"==e.type});return n.length===a.length?e.created_at-t.created_at:a.length-n.length}).map(function(t){return React.createElement(p,{key:t.uuid,entity_uuid:e.props.entity,entity_type:e.props.entityType,comment:t,authuser:e.state.authuser})}).slice((this.state.page-1)*this.state.perPage,this.state.page*this.state.perPage),React.createElement(m,{page:this.state.page,maxPages:parseInt(this.state.comments.length/this.state.perPage),handleChange:this.showPage}))},t}(React.Component),h=document.querySelector("#react-comments");return null!=h&&ReactDOM.render(u(d,{entity:h.getAttribute("entity"),entityType:h.getAttribute("entitytype")}),h),e}({});